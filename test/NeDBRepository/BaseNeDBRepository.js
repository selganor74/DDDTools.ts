define(["require", "exports"], function (require, exports) {
    "use strict";
    var DbItem = (function () {
        function DbItem(item) {
            this.key = item.getKey().toString();
            this.item = item;
        }
        return DbItem;
    }());
    var BaseNeDBRepository = (function () {
        function BaseNeDBRepository(options) {
            this.options = options;
            this.datastore = new Nedb(options);
        }
        BaseNeDBRepository.prototype.getById = function (id) {
            var toReturn;
            var done;
            var error;
            this.datastore.findOne({ key: id.toString() }, function (err, document) {
                error = err;
                toReturn = document.item;
                done = true;
            });
            while (done === undefined) { }
            ;
            if (error) {
            }
            return toReturn;
        };
        BaseNeDBRepository.prototype.save = function (item) {
            var done;
            var error;
            var toSave = new DbItem(item);
            this.datastore.insert(toSave, function (err, document) {
                error = err;
                done = true;
            });
            while (done === undefined) { }
            ;
            if (error) {
            }
        };
        BaseNeDBRepository.prototype.delete = function (id) {
            var done;
            var error;
            this.datastore.remove({ key: id.toString() }, function (err, n) {
                error = err;
                done = true;
            });
            while (done === undefined) { }
            ;
            if (error) {
            }
        };
        return BaseNeDBRepository;
    }());
    exports.BaseNeDBRepository = BaseNeDBRepository;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmFzZU5lREJSZXBvc2l0b3J5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL05lREJSZXBvc2l0b3J5L0Jhc2VOZURCUmVwb3NpdG9yeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztJQWNJO1FBT1EsZ0JBQWEsSUFBTztZQUNoQixJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUNwQyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNyQixDQUFDO1FBQ0wsYUFBQztJQUFELENBQUMsQUFYTCxJQVdLO0lBRUw7UUFRUSw0QkFDWSxPQUErQjtZQUEvQixZQUFPLEdBQVAsT0FBTyxDQUF3QjtZQUV2QyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZDLENBQUM7UUFFTSxvQ0FBTyxHQUFkLFVBQWUsRUFBTztZQUNsQixJQUFJLFFBQVcsQ0FBQztZQUNoQixJQUFJLElBQUksQ0FBQztZQUNULElBQUksS0FBSyxDQUFDO1lBRVYsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQWlCLEVBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxRQUFRLEVBQUUsRUFBQyxFQUFFLFVBQVMsR0FBRyxFQUFFLFFBQVE7Z0JBQy9FLEtBQUssR0FBRyxHQUFHLENBQUM7Z0JBQ1osUUFBUSxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUM7Z0JBQ3pCLElBQUksR0FBRyxJQUFJLENBQUM7WUFDaEIsQ0FBQyxDQUFDLENBQUM7WUFFSCxPQUFPLElBQUksS0FBSyxTQUFTLEVBQUUsQ0FBQyxDQUFBLENBQUM7WUFBQSxDQUFDO1lBQzlCLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFFWixDQUFDO1lBQ0QsTUFBTSxDQUFDLFFBQVEsQ0FBQztRQUNwQixDQUFDO1FBRU0saUNBQUksR0FBWCxVQUFZLElBQU87WUFDZixJQUFJLElBQUksQ0FBQztZQUNULElBQUksS0FBSyxDQUFDO1lBRVYsSUFBSSxNQUFNLEdBQUcsSUFBSSxNQUFNLENBQVUsSUFBSSxDQUFDLENBQUM7WUFDdkMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQWtCLE1BQU0sRUFBRSxVQUFTLEdBQUcsRUFBRSxRQUFRO2dCQUNqRSxLQUFLLEdBQUcsR0FBRyxDQUFDO2dCQUNaLElBQUksR0FBQyxJQUFJLENBQUM7WUFDZCxDQUFDLENBQUMsQ0FBQztZQUVILE9BQU8sSUFBSSxLQUFLLFNBQVMsRUFBRSxDQUFDLENBQUEsQ0FBQztZQUFBLENBQUM7WUFDOUIsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztZQUVaLENBQUM7UUFDTCxDQUFDO1FBRU0sbUNBQU0sR0FBYixVQUFjLEVBQVE7WUFDbEIsSUFBSSxJQUFJLENBQUM7WUFDVCxJQUFJLEtBQUssQ0FBQztZQUVWLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEVBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxRQUFRLEVBQUUsRUFBQyxFQUFFLFVBQVMsR0FBRyxFQUFFLENBQUM7Z0JBQ3ZELEtBQUssR0FBRyxHQUFHLENBQUM7Z0JBQ1osSUFBSSxHQUFHLElBQUksQ0FBQztZQUNoQixDQUFDLENBQUMsQ0FBQztZQUVILE9BQU8sSUFBSSxLQUFLLFNBQVMsRUFBRSxDQUFDLENBQUEsQ0FBQztZQUFBLENBQUM7WUFDOUIsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztZQUVaLENBQUM7UUFDTCxDQUFDO1FBQ0wseUJBQUM7SUFBRCxDQUFDLEFBOURMLElBOERLO0lBOURpQiwwQkFBa0IscUJBOERuQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvYnJvd3Nlci5kLnRzXCIgLz5cclxuXHJcbmltcG9ydCBOZURCRGF0YVN0b3JlID0gcmVxdWlyZSggXCJuZWRiXCIgKTtcclxuXHJcbmltcG9ydCB7QmFzZUFnZ3JlZ2F0ZVJvb3R9IGZyb20gXCIuLi8uLi9zcmMvREREVG9vbHMvQWdncmVnYXRlL0Jhc2VBZ2dyZWdhdGVSb290XCI7XHJcbmltcG9ydCB7SUtleVZhbHVlT2JqZWN0fSBmcm9tIFwiLi4vLi4vc3JjL0RERFRvb2xzL0VudGl0eS9JS2V5VmFsdWVPYmplY3RcIjtcclxuaW1wb3J0IHtJUmVwb3NpdG9yeX0gZnJvbSBcIi4uLy4uL3NyYy9ERERUb29scy9SZXBvc2l0b3J5L0lSZXBvc2l0b3J5XCI7XHJcblxyXG4vKipcclxuICogUmVwb3NpdG9yeSBpbXBsZW1lbnRhdGlvbiBmb3IgdGhlIE5lREIgZGF0YWJhc2UuXHJcbiAqL1xyXG4vLyBuYW1lc3BhY2UgUmVwb3NpdG9yeS5OZURCSW1wbGVtZW50YXRpb24ge1xyXG4gICAgZGVjbGFyZSB2YXIgTmVkYiA6IHR5cGVvZiBOZURCRGF0YVN0b3JlO1xyXG4gICAgXHJcbiAgICBjbGFzcyBEYkl0ZW08XHJcbiAgICAgICAgVCBleHRlbmRzIEJhc2VBZ2dyZWdhdGVSb290PFQsIFRLZXk+LCBcclxuICAgICAgICBUS2V5IGV4dGVuZHMgSUtleVZhbHVlT2JqZWN0PFRLZXk+XHJcbiAgICAgICAgPiB7XHJcbiAgICAgICAgICAgIGtleTogc3RyaW5nO1xyXG4gICAgICAgICAgICBpdGVtOiBUO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3RydWN0b3IoIGl0ZW06IFQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMua2V5ID0gaXRlbS5nZXRLZXkoKS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtID0gaXRlbTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJhc2VOZURCUmVwb3NpdG9yeVxyXG4gICAgICAgIDxcclxuICAgICAgICAgICAgVCBleHRlbmRzIEJhc2VBZ2dyZWdhdGVSb290PFQsIFRLZXk+LFxyXG4gICAgICAgICAgICBUS2V5IGV4dGVuZHMgSUtleVZhbHVlT2JqZWN0PFRLZXk+XHJcbiAgICAgICAgPiBpbXBsZW1lbnRzIElSZXBvc2l0b3J5PFQsIFRLZXk+IHsgXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgcHJpdmF0ZSBkYXRhc3RvcmU6IE5lREJEYXRhU3RvcmU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICAgICAgICAgIHByaXZhdGUgb3B0aW9ucz86IE5lREIuRGF0YVN0b3JlT3B0aW9uc1xyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YXN0b3JlID0gbmV3IE5lZGIob3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHB1YmxpYyBnZXRCeUlkKGlkOlRLZXkpOiBUIHtcclxuICAgICAgICAgICAgICAgIHZhciB0b1JldHVybjogVDtcclxuICAgICAgICAgICAgICAgIHZhciBkb25lO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVycm9yO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFzdG9yZS5maW5kT25lPERiSXRlbTxULFRLZXk+Pih7a2V5OiBpZC50b1N0cmluZygpfSwgZnVuY3Rpb24oZXJyLCBkb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yID0gZXJyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRvUmV0dXJuID0gZG9jdW1lbnQuaXRlbTtcclxuICAgICAgICAgICAgICAgICAgICBkb25lID0gdHJ1ZTsgICAgXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKGRvbmUgPT09IHVuZGVmaW5lZCkge307XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIENyZWF0ZSBFeGNlcHRpb24gSGVyZS5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0b1JldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcHVibGljIHNhdmUoaXRlbTogVCk6IHZvaWQge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRvbmU7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3I7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHZhciB0b1NhdmUgPSBuZXcgRGJJdGVtPFQsIFRLZXk+KGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhc3RvcmUuaW5zZXJ0PERiSXRlbTxULCBUS2V5Pj4odG9TYXZlLCBmdW5jdGlvbihlcnIsIGRvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSBlcnI7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9uZT10cnVlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHdoaWxlIChkb25lID09PSB1bmRlZmluZWQpIHt9O1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyBDcmVhdGUgRXhjZXB0aW9uIEhlcmUuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHB1YmxpYyBkZWxldGUoaWQ6IFRLZXkpOiB2b2lkIHtcclxuICAgICAgICAgICAgICAgIHZhciBkb25lO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVycm9yO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFzdG9yZS5yZW1vdmUoe2tleTogaWQudG9TdHJpbmcoKX0sIGZ1bmN0aW9uKGVyciwgbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yID0gZXJyO1xyXG4gICAgICAgICAgICAgICAgICAgIGRvbmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKGRvbmUgPT09IHVuZGVmaW5lZCkge307XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIENyZWF0ZSBFeGNlcHRpb24gSGVyZS5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuLy8gfSJdfQ==